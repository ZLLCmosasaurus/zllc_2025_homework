## Home_Work_2.1.3


1. **裁判系统**  
   1. 数据手册与通信协议：  
    https://www.robomaster.com/zh-CN/products/components/referee?djifrom=nav  
   2. 参考文章：  
    https://bbs.robomaster.com/article/4157
   3. 通信协议的总结：
    https://blog.csdn.net/weixin_45624682/article/details/124078534 
   4. UI相关文章：  
    https://bbs.robomaster.com/article/8163
---
   * 都是使用UART通信  
   * 通信链路分为常规链路与图传链路。 可以看串口协议有介绍。我们用的接收常规数据和UI通信为常规链路，而图传（键鼠控制）用的为图传链路。由裁判系统主控模块和其服务器进行数据转发。
---
   * 通信：
   * * 裁判系统数据发到下板，经过下板把数据按手册解析再选择部分通过can线发到上板，上板再进行相应的处理。
   * * 使用了串口空闲接收不定长数据以及DMA加快传输。原因：裁判系统发送的数据长度不定，<mark>一次可能发送多帧（多组）数据<mark>。
   * * 图传通信：图传接到了上板，类似于遥控器，在上板进行的数据解析。
   * * 传过来的信息为**低位优先（LSB）**
---
   * UI绘制（常规链路）
   * * 主要用的0x0301的图形绘制主id。
   * * 所有图形字符都 Init 10次，可能是为了加深显示效果。
   * * 其他代码，大部分应该都是照着手册协议上进行绘制。
---

---
2. **CRC校验**
   1. 简单理解，参考视频链接：  
   https://www.bilibili.com/video/BV1rJ411V7L5/?spm_id_from=333.337.search-card.all.click&vd_source=de144ef193dc3f4b419bd8828397d9db

   2. 深入理解，参考文章（！！！）：  （文章中的运算用到了异或运算的分配律以及一些特性）
   https://www.cnblogs.com/qiyuexin/p/18363214

   3. 对下图的理解  
   ![alt text](image-12.png)
    &ensp; 除法，就是让数被除数不断减小，最后到不能再除。 而对应到无符号除法，二进制除法上，就是让二进制位数不断减少，到最后无法在发生下次对齐，不能再除，剩下的即为余数，我们目标的CRC校验值。  
    &ensp; 所以，对其是为了找到第一个最高位为1的数，而除数10011，前的第一个1，实际上是为了消去找到的最高位的1，实现减位。这也是为什么他说，实际运算起作用的是0011。这也对应了代码的<<左移消位。  
    &ensp; 反过来看，不进行对齐和消位，无法找到余数。  

   4. Question： 为什么运算是要补位？  
   Ans（粗浅理解and推测）：实际上是为了使被除数上的每一位都参与运算，都对最终的CRC校验值产生贡献，最终保证每一位在传输过程中的正确性。同时也存放了最后的CRC校验值。实际计算机运算中，用了crc变量来保存余数，同时可以遍历每一位，所以不用加0。


   5. 没看懂。以后再补。
   